(function(){let g=JSON.parse(localStorage.getItem('arkNovaGames')||'[]');let t=location.search.match(/table=(\d+)/)[1];if(g.find(x=>x.tableId===t))return;let r=[...document.querySelectorAll('table.statstable tr')].map(r=>[...r.querySelectorAll('td,th')].map(c=>c.innerText.trim()));let p=r[0].slice(1);let s={};for(let i=1;i<r.length;i++){let n=r[i][0];if(!n||n==='All stats')continue;s[n]={};p.forEach((pl,j)=>s[n][pl]=r[i][j+1]||'')}let bt=document.body.innerText;let dm=bt.match(/Created\s+(\d{1,2})\/(\d{1,2})\/(\d{4})/i)||bt.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);let d=dm?`${dm[3]}-${dm[1].padStart(2,'0')}-${dm[2].padStart(2,'0')}`:null;g.push({tableId:t,url:location.href,players:p,stats:s,date:d});localStorage.setItem('arkNovaGames',JSON.stringify(g));console.log('Got '+g.length+(d?' ('+d+')':' (no date)'))})()
